<!doctype html>
<head>
  <title>joseph swetnam</title>
</head>
<body>
  -- <h3>2016/06/20</h3>
  <h4>let-></h4>
  While working with <a href="https://github.com/xeqi/kerodon"><pre>kerodon</pre></a> recently, I came across a situation where, in the middle of a threading macro <pre>-></pre> body, I wanted to capture an intermediate value and perform several tests on it without threading the results of one test to the next.  What I wanted was to use <pre>as-></pre> to capture the return value of the last form, with a <pre>let</pre> inside to do several things to that value.  I wrote a <pre>let-></pre> macro to do both in one step:
  <pre>
    (defmacro let->
      [start-val binding-sym & body]
      `(as-> ~start-val x# (let [~binding-sym x#] ~@body)))
    
    (-> 1
        (cons [2 3])
        (let-> $
          (prn $)
          (count $)))
  </pre>
</body>
